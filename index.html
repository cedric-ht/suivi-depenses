<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Compta Auto â€“ Pour comptables</title>
  <script src="https://unpkg.com/tesseract.js@v4.0.0/dist/tesseract.min.js"></script>
  <style>
    body { font-family: Arial; text-align: center; background: #f4f4f4; margin: 0; padding: 20px; }
    h1 { color: #2c3e50; }
    .container { max-width: 600px; margin: 40px auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
    input, button { padding: 12px; margin: 10px; font-size: 16px; width: 80%; }
    button { background: #27ae60; color: white; border: none; border-radius: 6px; cursor: pointer; }
    button:hover { background: #219653; }
    .price { font-size: 28px; color: #27ae60; font-weight: bold; margin: 20px 0; }
    #result { margin-top:20px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Compta Auto â€“ Pour comptables</h1>
    <p>Vos TPE envoient photo â†’ PDF auto â†’ import direct dans Pennylane</p>
    <p style="font-weight:bold; color:#e74c3c;">ðŸ”¥ 7 jours GRATUIT â€“ Annulation quand tu veux</p>
    <input type="file" id="facture" accept="image/*">
    <input type="email" id="tpeEmail" placeholder="Email du TPE">
    <button onclick="scan()">Scanner & GÃ©nÃ©rer PDF Pennylane</button>
    <p class="price">49 â‚¬ / mois</p>
    <button onclick="payer()">Payer avec Stripe</button>
    <div id="result"></div>
  </div>

  <script>
    async function scan() {
      const file = document.getElementById('facture').files[0];
      const tpeEmail = document.getElementById('tpeEmail').value;
      if (!file) return alert("Choisis une photo");
      if (!tpeEmail) return alert("Entre l'email du TPE");

      document.getElementById("result").innerHTML = "Scan en cours...";

      const { data: { text } } = await Tesseract.recognize(file, 'fra');

      const pdfText = `Facture reÃ§ue de ${tpeEmail}\n\n${text}\n\nPrÃªt Ã  importer dans Pennylane (PDF structurÃ©).`;
      const blob = new Blob([pdfText], { type: 'application/pdf' });
      const url = URL.createObjectURL(blob);

      document.getElementById("result").innerHTML = `
        <pre>${pdfText}</pre><br>
        <a href="${url}" download="facture_pennylane.pdf">TÃ©lÃ©charger PDF pour Pennylane</a><br>
        <p style="color:green; font-weight:bold;">PDF prÃªt Ã  importer (drag & drop dans Achats)</p>
      `;
    }

    function payer() {
      window.location.href = "https://buy.stripe.com/test_4gM6oI07MaNk5jX0Z693y02";
    }
  </script>
</body>
</html>
